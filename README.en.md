[![es](https://img.shields.io/badge/lang-es-aquamarine.svg)](https://github.com/enzoferrari1/TP-API/blob/master/README.md)

# Assignment - Redes de Datos
Final project for the Redes de Datos course

### Made with
- Python
  - FastAPI
  - uvicorn

## Description
This project focuses on creating an API. It involves sourcing and data acquisition methods, client development, and user access facilitation. The latter is also linked to ensuring the connection between the client and the user in a local network.

The assignment requires the use of at least two of the PUSH, POST, GET, and DELETE methods.

## Motivation
The student's proposed project consists of an API focused on querying US public spending and a stock manager, enabling users to make decisions based on the generated information.

It provides the user with the following functionalities:
- Querying the top recipients who received the highest amounts of money within a given time lapse and presenting the information effectively.
- With the information obtained from the previous point, adding stocks to a staging area along with statistical indicators.
- Querying and deleting stocks from the staging area.

## Consulted APIs
- https://api.usaspending.gov/api/v2/search/spending_by_category/recipientusaspending.gov

Provides information about US public spending. Offers an API to query the data. Of interest is knowing, within a time frame, which recipients received the most funds from the government.

- https://www.alphavantage.co/query?function=OVERVIEW&symbol=GOOG&apikey=WEZ4MINFUGJQPQK2

Obtains details about each stock beyond the quotation, as real-time quotation couldn't be obtained from here due to the unavailability. Another API needs to be used for this purpose.

- https://financialmodelingprep.com/api/v3/quote-short/GOOG,TSLA?apikey=8f88ca39ce56acf3d5a9778cd9ccb4f6

This endpoint displays the quotation of stocks at the time of query for a given array of stock names.

## Endpoints
Brief description of each created endpoint. For more information, visit the documentation generated by Swagger.
- **PUT** - /informe/crear :

Creates a report of US government spending by recipient, ordered from highest to lowest amount, within a given time frame.

Recipients are written to a gastos.json file.

- **GET** - /informe/graficar/{top} :

Bar chart displaying the amounts for each recipient generated by the report.

top: number of recipients to be plotted.

![image](https://github.com/enzoferrari1/TP-API/assets/109885056/45aced24-b566-4226-8cf6-147ca4ce74e6)

- **POST** - /staging/agregar-stocks :

Adds stocks to the staging area. Requires added date, stock name, and government investment amount.

The API auto-completes additional statistical indicators.

Example body:
```
[
{
"added_date": "2023-08-17",
"stock_name": "BAH",
"government_investment_amount": 10000000
},
{
"added_date": "2023-08-17",
"stock_name": "GD",
"government_investment_amount": 5000000
}
]
```

- **GET** - /staging/consultar-stocks :

Displays the added stocks stored in the JSON file.

Example
|index|fecha\_agregado|nombre\_accion|cotizacion|monto\_invertido\_gobierno|capitalizacion\_empresa|relacion\_inversion-capitalizacion|price\_to\_earnings\_ratio|analyst\_target\_price|50\_day\_moving\_average|
|---|---|---|---|---|---|---|---|---|---|
|0|2023-08-17|BAH|117\.33|10000000|16003020000|0\.0006248821|30\.44|129\.55|113\.51|
|1|2023-08-17|BAH|117\.33|10000000|16003020000|0\.0006248821|30\.44|129\.55|113\.51|
|2|2023-08-17|GD|223\.865|5000000|61049684000|8\.19005e-05|18\.34|264\.37|217\.84|


- **DELETE** - /staging/borrar-stocks :

Deletes specific stocks from the staging area based on name or date.

### Client Environment
The program was executed in a Lubuntu 22.04 environment.
The libraries to be used are indicated at the beginning of the *main.py* file. To run the program, the uvicorn package is required, using the command
```
uvicorn main:app --reload --host [ip]
```


### User Environment
Developing a program to provide easy client access might be a missing part of this project.
However, the Swagger-generated documentation is sufficient to provide users with access to each endpoint.

For this, the client must access the link from their preferred web browser

http://127.0.0.1:8000/docs

Replace the loopback IP and port as needed. There, they will find documentation for each endpoint.
